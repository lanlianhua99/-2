(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0486":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.filterTime=void 0,e.formatTime=u,e.parseTime=s,n("ac1f"),n("00b4"),n("e25e"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d401"),n("d3b7"),n("4d90");var a=i(n("53ca"));function s(t,e){if(0===arguments.length||!t)return null;var n,i=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===(0,a.default)(t)?n=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var s={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},u=i.replace(/{([ymdhisa])+}/g,(function(t,e){var n=s[e];return"a"===e?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return u}function u(t,e){t=10===(""+t).length?1e3*parseInt(t):+t;var n=new Date(t),i=Date.now(),a=(i-n)/1e3;return a<30?"刚刚":a<3600?Math.ceil(a/60)+"分钟前":a<86400?s(t,"{h}:{i}"):n.getFullYear()===(new Date).getFullYear()?s(t,"{m}-{d} {h}:{i}"):e?s(t,e):n.getFullYear()+"年"+(parseInt(n.getMonth())+1)+"月"+n.getDate()+"日"+n.getHours()+":"+n.getMinutes()}e.filterTime=function(t){return t?u(+new Date(t)):""}},"0ccb":function(t,e,n){var i=n("e330"),a=n("50c4"),s=n("577e"),u=n("1148"),r=n("1d80"),o=i(u),c=i("".slice),l=Math.ceil,f=function(t){return function(e,n,i){var u,f,d=s(r(e)),g=a(n),v=d.length,h=void 0===i?" ":s(i);return g<=v||""==h?d:(u=g-v,f=o(h,l(u/h.length)),f.length>u&&(f=c(f,0,u)),t?d+f:f+d)}};t.exports={start:f(!1),end:f(!0)}},1148:function(t,e,n){"use strict";var i=n("5926"),a=n("577e"),s=n("1d80"),u=RangeError;t.exports=function(t){var e=a(s(this)),n="",r=i(t);if(r<0||r==1/0)throw u("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},"2ed5":function(t,e,n){"use strict";n.r(e);var i=n("ec66"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"4d90":function(t,e,n){"use strict";var i=n("23e7"),a=n("0ccb").start,s=n("9a0c");i({target:"String",proto:!0,forced:s},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"65a7":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-card__header-extra[data-v-67a97d16]{line-height:12px}uni-button[data-v-67a97d16]{padding:5px 8px;line-height:1.5}',""]),t.exports=e},"9a0c":function(t,e,n){var i=n("342f");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},a4a7:function(t,e,n){"use strict";var i=n("b1d9"),a=n.n(i);a.a},b1d9:function(t,e,n){var i=n("65a7");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("ed8769cc",i,!0,{sourceMap:!1,shadowMode:!1})},b242:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uniTag:n("ebcb").default,uniCard:n("bd10").default,uniPagination:n("63d3").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"status"},[n("div",{staticClass:"status-body"},t._l(t.statusRange,(function(e){return n("uni-tag",{key:e.value,attrs:{type:t.query.status==e.value?"primary":"default",text:e.text},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.statusChange(e)}}})})),1),n("v-uni-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetQuery.apply(void 0,arguments)}}},[t._v("重置")])],1),n("v-uni-view",{staticClass:"status",staticStyle:{"margin-top":"10px"}},t._l(t.setStatusList,(function(e,i){return n("v-uni-button",{key:i,attrs:{size:"mini",type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.quickSetStatus(e.value)}}},[t._v(t._s(e.text))])})),1),t.cardList.length>0?n("div",{staticClass:"content"},t._l(t.cardList,(function(e){return n("uni-card",{attrs:{title:"id:"+e.id,extra:"状态:"+(1==e.status?"上线中":"下线/审核中")},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goDetail(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"uni-card__header"},[n("v-uni-text",[t._v("链接id:"+t._s(e.id))]),n("v-uni-text",[t._v("用户名:"+t._s(e.userName))]),n("v-uni-text",[n("uni-tag",{attrs:{text:1==e.status?"上线中":0==e.status?"下线":"审核中",type:1==e.status?"primary":0==e.status?"danger":"warning"}})],1)],1)]},proxy:!0}],null,!0)},[n("p",[t._v("密码:"+t._s(e.password))]),n("p",[t._v("链接:"+t._s(e.panUrl))]),n("p",[t._v("访问次数:"+t._s(e.viewCount))]),e.isAD?n("p",[t._v("广告链接")]):t._e(),n("p",[t._v("创建时间:"+t._s(t.filterTime(e.createAt)))])])})),1):n("v-uni-view",{staticClass:"empty-card"},[t._v("暂无数据")]),n("uni-pagination",{attrs:{total:t.totalCount,title:"标题文字",current:t.pageNum,pageSize:t.query.size},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.pageChange.apply(void 0,arguments)}}})],1)},s=[]},d0f0:function(t,e,n){"use strict";n.r(e);var i=n("b242"),a=n("2ed5");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("a4a7");var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"67a97d16",null,!1,i["a"],void 0);e["default"]=r.exports},ec66:function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4"),n("d401"),n("0eb6"),n("b7ef"),n("8bd4");var a=i(n("494d")),s=n("bf5c"),u=n("0486"),r={components:{UniDataSelect:a.default},data:function(){return{searchValue:"",cardList:[],statusRange:[{text:"全部",value:""},{text:"审核中",value:"-1"},{text:"审核通过",value:"2"}],query:{offset:0,size:10,status:"",userId:"",isAD:0},totalCount:0,userName:"",setStatusList:[{text:"全部审核通过",value:0},{text:"全部审核中",value:-1}]}},onLoad:function(e){var n=this;uni.$on("selectUser",(function(e){t.log("监听到事件来自 selectUser ，携带参数 为："+e.userName),n.query.userId=e.userId,n.userName=e.userName,setTimeout((function(){uni.setNavigationBarTitle({title:"用户"+e.userName+"的链接列表"}).then((function(e){t.log("setNavigationBarTitle",e)}))}),50),n.getDataList()})),uni.$on("updateList",(function(){t.log("监听到事件来自 updateList"),n.getDataList()})),this.getDataList()},onShow:function(){t.log("onShow");var e="内容管理";this.userName&&(e="用户"+this.userName+"的链接列表"),setTimeout((function(){uni.setNavigationBarTitle({title:e})}),50)},onUnload:function(){t.log("onUnload"),uni.$off("selectUser"),uni.$off("updateList")},computed:{pageNum:function(){return this.query.offset/this.query.size+1}},methods:{filterTime:u.filterTime,isADChange:function(){this.query.isAD?this.query.isAD="":this.query.isAD=1,this.getDataList()},goAdd:function(t){JSON.stringify(t);uni.navigateTo({url:"/pages/index/detail/detail"})},resetQuery:function(){this.query={offset:0,size:10,status:"",userId:"",isAD:""},this.userName="",this.getDataList(),setTimeout((function(){uni.setNavigationBarTitle({title:"内容管理"})}),50)},search:function(t){this.$emit("search",t.value)},goDetail:function(t){var e=JSON.stringify(t);uni.navigateTo({url:"/pages/index/detail/detail?item="+btoa(encodeURIComponent(e))})},statusChange:function(e){t.log("statusChange",e),this.query.offset=0,this.query.status=e.value,this.getDataList()},getDataList:function(){var e=this;(0,s.getMomentList)(this.query).then((function(n){e.cardList=n.list,e.totalCount=n.count,t.log("getMomentList",n,e.pageNum)})).catch((function(e){t.log("getMomentList",e)}))},pageChange:function(e){this.query.offset=(e.current-1)*this.query.size,this.getDataList(),t.log("pageChange",e,this.query.offset)},quickSetStatus:function(e){var n=this;t.log("setAllStatus",e),uni.showModal({title:"提示",content:"确定要将所有内容"+(0===e?"审核通过":"审核中")+"吗？",success:function(i){i.confirm&&(0,s.setAllStatus)({status:e,isAD:0}).then((function(e){t.log(e),n.getDataList()})).catch((function(e){t.log(e)}))}})}},onHide:function(){}};e.default=r}).call(this,n("5a52")["default"])}}]);