(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ad-detail-detail"],{"057c":function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("5530"));a("d401"),a("81b2"),a("0eb6"),a("b7ef"),a("8bd4"),a("d81d");var o=a("bf5c"),n=i(a("c760")),u={components:{UniFormsItem:n.default},data:function(){return{valiFormData:{panUrl:"",password:"",status:1,groupName:"",unlockHTML:""},momentInfo:{},rules:{panUrl:{rules:[{required:!0,errorMessage:"链接不能为空"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,errorMessage:"请输入正确的链接"}]},password:{rules:[{required:!0,errorMessage:"密码不能为空"}]},status:{rules:[{required:!0,errorMessage:"状态不能为空"}]},groupName:{rules:[{required:!0,errorMessage:"分组不能为空"}]}},statusRange:[{text:"上线",value:1},{text:"下线",value:0}],showPicker:!1,columns:[{text:"分组1",value:"1"},{text:"分组2",value:"2"},{text:"分组3",value:"3"}],pickerIndex:0,isEdit:!1}},onLoad:function(e){e.item&&(this.momentInfo=JSON.parse(decodeURIComponent(atob(e.item))),this.valiFormData=JSON.parse(decodeURIComponent(atob(e.item))),t.log(this.valiFormData,"this.valiFormData")),uni.setNavigationBarTitle({title:this.valiFormData.panUrl?"编辑":"添加广告"}),this.isEdit=Boolean(e.item),t.log(this.isEdit,"this.isEdit"),this.isEdit||(this.valiFormData.groupName="全站置顶",this.statusRange.pop()),this.getGroupList()},methods:{submit:function(e){var a=this;this.$refs.valiForm.validate().then((function(e){t.log("校验通过",e,a.valiFormData),a.isEdit?(0,o.updateMoment)((0,r.default)((0,r.default)({},e),{},{momentId:a.momentInfo.id})).then((function(e){t.log(e),uni.$emit("updateList"),uni.showToast({title:"提交成功",icon:"success"}),setTimeout((function(){a.$router.back()}),500)})).catch((function(e){t.log(e)})):(t.log("values",a.valiFormData),(0,o.addMoment)((0,r.default)((0,r.default)({},a.valiFormData),{},{isAD:1})).then((function(e){t.log(e),uni.showToast({title:"提交成功",icon:"success"}),uni.switchTab({url:"/pages/ad/index"}),uni.$emit("updateList")})).catch((function(e){t.log(e)})))}))},deleteItem:function(){var e=this;uni.showModal({title:"提示",content:"确定删除吗？",success:function(a){a.confirm?(t.log("用户点击确定"),(0,o.deleteMoment)(e.momentInfo.id).then((function(a){t.log(a),uni.$emit("updateList"),uni.showToast({title:"删除成功",icon:"success"}),setTimeout((function(){e.$router.back()}),500)})).catch((function(e){t.log(e)}))):a.cancel&&t.log("用户点击取消")}})},bindPickerChange:function(e){t.log("picker发送选择改变，携带值为",e.detail.value),this.pickerIndex=e.detail.value,this.valiFormData.groupName=this.columns[e.detail.value]},getGroupList:function(){var e=this;(0,o.getGroupList)().then((function(a){t.log(a),e.columns=a.map((function(t){return t.groupName}))}))}}};e.default=u}).call(this,a("5a52")["default"])},"339fe":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.text?a("v-uni-text",{staticClass:"uni-tag",class:t.classes,style:t.customStyle,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t._v(t._s(t.text))]):t._e()},r=[]},"356a":function(t,e,a){"use strict";a.r(e);var i=a("057c"),r=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},"5c7d":function(t,e,a){"use strict";a.r(e);var i=a("d5ca"),r=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},"7d96":function(t,e,a){"use strict";var i=a("b905"),r=a.n(i);r.a},8738:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".example[data-v-2a17210e]{padding:15px;background-color:#fff}.segmented-control[data-v-2a17210e]{margin-bottom:15px}.button-group[data-v-2a17210e]{margin-top:15px;display:flex;justify-content:space-around}.form-item[data-v-2a17210e]{display:flex;align-items:center}.button[data-v-2a17210e]{display:flex;align-items:center;height:35px;margin-left:10px}.preHTml[data-v-2a17210e]{border:1px solid #999;border-radius:4px;margin-bottom:10px;padding:10px}.sign-opration[data-v-2a17210e]{display:flex;justify-content:space-around;margin-top:10px}",""]),t.exports=e},"91b6":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniForms:a("882c").default,uniFormsItem:a("c760").default,uniEasyinput:a("f1cb").default,uniDataSelect:a("494d").default,uniTag:a("ebcb").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"example"},[a("uni-forms",{ref:"valiForm",attrs:{rules:t.rules,model:t.valiFormData,"label-width":"100"}},[a("uni-forms-item",{attrs:{label:"链接",name:"panUrl",required:!0}},[a("uni-easyinput",{attrs:{type:"textarea",maxlength:-1,placeholder:"请输入链接"},model:{value:t.valiFormData.panUrl,callback:function(e){t.$set(t.valiFormData,"panUrl",e)},expression:"valiFormData.panUrl"}})],1),a("uni-forms-item",{attrs:{label:"密码",name:"password",required:!0}},[a("uni-easyinput",{attrs:{placeholder:"请输入密码"},model:{value:t.valiFormData.password,callback:function(e){t.$set(t.valiFormData,"password",e)},expression:"valiFormData.password"}})],1),a("uni-forms-item",{attrs:{label:"状态",name:"status",required:!0}},[a("uni-data-select",{attrs:{placeholder:"请选择状态",localdata:t.statusRange},model:{value:t.valiFormData.status,callback:function(e){t.$set(t.valiFormData,"status",e)},expression:"valiFormData.status"}})],1),a("uni-forms-item",{attrs:{label:"分组",name:"groupName",required:!0}},[a("uni-easyinput",{attrs:{placeholder:"请输入分组",disabled:!t.isEdit},scopedSlots:t._u([{key:"right",fn:function(){return[a("v-uni-picker",{attrs:{value:t.pickerIndex,range:t.columns,"range-key":"text"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange.apply(void 0,arguments)}}},[t.isEdit?a("uni-tag",{attrs:{text:"快速分组",type:"primary"}}):t._e()],1)]},proxy:!0}]),model:{value:t.valiFormData.groupName,callback:function(e){t.$set(t.valiFormData,"groupName",e)},expression:"valiFormData.groupName"}})],1),a("uni-forms-item",{attrs:{label:"广告html代码",name:"unlockHTML",required:!0}},[a("uni-easyinput",{attrs:{type:"textarea",placeholder:"请输入广告html代码",autoHeight:!0,maxlength:-1},model:{value:t.valiFormData.unlockHTML,callback:function(e){t.$set(t.valiFormData,"unlockHTML",e)},expression:"valiFormData.unlockHTML"}})],1),!t.isEdit&&t.valiFormData.unlockHTML?a("div",[a("p",[t._v("预览")]),a("div",{staticClass:"preHTml",domProps:{innerHTML:t._s(t.valiFormData.unlockHTML)}})]):t._e()],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit("valiForm")}}},[t._v("提交")]),t.isEdit?a("v-uni-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warn"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteItem.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1)},o=[]},"9b08":function(t,e,a){var i=a("c35d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("4f06").default;r("71d0e21c",i,!0,{sourceMap:!1,shadowMode:!1})},b905:function(t,e,a){var i=a("8738");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("4f06").default;r("5efa622f",i,!0,{sourceMap:!1,shadowMode:!1})},c35d:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-tag[data-v-54045d8e]{line-height:14px;font-size:12px;font-weight:200;padding:4px 7px;color:#fff;border-radius:3px;background-color:#8f939c;border-width:%?1?%;border-style:solid;border-color:#8f939c;cursor:pointer}.uni-tag--default[data-v-54045d8e]{font-size:12px}.uni-tag--default--inverted[data-v-54045d8e]{color:#8f939c;border-color:#8f939c}.uni-tag--small[data-v-54045d8e]{padding:2px 5px;font-size:12px;border-radius:2px}.uni-tag--mini[data-v-54045d8e]{padding:1px 3px;font-size:12px;border-radius:2px}.uni-tag--primary[data-v-54045d8e]{background-color:#2979ff;border-color:#2979ff;color:#fff}.uni-tag--success[data-v-54045d8e]{color:#fff;background-color:#18bc37;border-color:#18bc37}.uni-tag--warning[data-v-54045d8e]{color:#fff;background-color:#f3a73f;border-color:#f3a73f}.uni-tag--error[data-v-54045d8e]{color:#fff;background-color:#e43d33;border-color:#e43d33}.uni-tag--primary--inverted[data-v-54045d8e]{color:#2979ff;border-color:#2979ff}.uni-tag--success--inverted[data-v-54045d8e]{color:#18bc37;border-color:#18bc37}.uni-tag--warning--inverted[data-v-54045d8e]{color:#f3a73f;border-color:#f3a73f}.uni-tag--error--inverted[data-v-54045d8e]{color:#e43d33;border-color:#e43d33}.uni-tag--inverted[data-v-54045d8e]{background-color:#fff}.uni-tag--circle[data-v-54045d8e]{border-radius:15px!important}.uni-tag--mark[data-v-54045d8e]{border-top-left-radius:0!important;border-bottom-left-radius:0!important;border-top-right-radius:15px!important;border-bottom-right-radius:15px!important}.uni-tag--disabled[data-v-54045d8e]{opacity:.5;cursor:not-allowed}.uni-tag-text[data-v-54045d8e]{color:#fff;font-size:14px}.uni-tag-text--primary[data-v-54045d8e]{color:#2979ff}.uni-tag-text--success[data-v-54045d8e]{color:#18bc37}.uni-tag-text--warning[data-v-54045d8e]{color:#f3a73f}.uni-tag-text--error[data-v-54045d8e]{color:#e43d33}.uni-tag-text--small[data-v-54045d8e]{font-size:12px}',""]),t.exports=e},d5ca:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes:function(){var t=this.type,e=this.disabled,a=this.inverted,i=this.circle,r=this.mark,o=this.size,n=this.isTrue,u=["uni-tag--"+t,"uni-tag--"+o,n(e)?"uni-tag--disabled":"",n(a)?"uni-tag--"+t+"--inverted":"",n(i)?"uni-tag--circle":"",n(r)?"uni-tag--mark":"",n(a)?"uni-tag--inverted uni-tag-text--"+t:"","small"===o?"uni-tag-text--small":""];return u.join(" ")}},methods:{isTrue:function(t){return!0===t||"true"===t},onClick:function(){this.isTrue(this.disabled)||this.$emit("click")}}};e.default=i},e72d:function(t,e,a){"use strict";var i=a("9b08"),r=a.n(i);r.a},eade:function(t,e,a){"use strict";a.r(e);var i=a("91b6"),r=a("356a");for(var o in r)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("7d96");var n=a("f0c5"),u=Object(n["a"])(r["default"],i["b"],i["c"],!1,null,"2a17210e",null,!1,i["a"],void 0);e["default"]=u.exports},ebcb:function(t,e,a){"use strict";a.r(e);var i=a("339fe"),r=a("5c7d");for(var o in r)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("e72d");var n=a("f0c5"),u=Object(n["a"])(r["default"],i["b"],i["c"],!1,null,"54045d8e",null,!1,i["a"],void 0);e["default"]=u.exports}}]);